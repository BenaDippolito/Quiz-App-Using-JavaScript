<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Flashcards— GRC</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@300;400;600&display=swap"
        rel="stylesheet">
    <!-- Use project stylesheet for flashcard preview styles -->

    <!-- inline styles removed — moved to style.css -->
</head>

<body>
    <nav class="top-nav container">
        <div class="brand"><a href="index.html" class="brand-link">GRC Launchpad</a></div>
        <div class="nav-actions">
            <a class="btn ghost" href="index.html">Home</a>
            <a class="btn primary" href="quiz.html">Quizzes</a>
            <a class="btn outline" href="flashcards.html">Flashcards</a>
        </div>
    </nav>
    <div class="preview">
        <div class="meta">
            <div class="title">Flashcards </div>
            <div id="count">0 / 0</div>
        </div>

        <div id="card" class="card" role="region" aria-label="flashcard">
            <div class="card-inner">
                <div class="face front" id="front">Question</div>
                <div class="face back" id="back">Answer</div>
            </div>
        </div>

        <div class="controls">
            <button id="prev" class="btn">◀ Prev</button>
            <button id="flip" class="btn">Flip</button>
            <button id="next" class="btn">Next ▶</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Use the live questions array from script.js if available.
        // `questions` is declared with `const` in script.js and is not a property of window,
        // so check the identifier first and fall back to window.questions for safety.
        const allQuestions = (typeof questions !== 'undefined') ? questions : (window.questions || []);

        // Pick up to N random unique questions using Fisher-Yates shuffle
        function pickRandom(arr, n) {
            const copy = arr.slice();
            for (let i = copy.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [copy[i], copy[j]] = [copy[j], copy[i]];
            }
            return copy.slice(0, Math.min(n, copy.length));
        }

        const SAMPLE_SIZE = 10;
        const selected = pickRandom(allQuestions, SAMPLE_SIZE);

        // Build flashcards: front = question, back = correct answer text
        const flashcards = selected.map(q => ({
            question: q.question,
            answer: (q.answers.find(a => a.correct) || {}).text || (q.answers[0] && q.answers[0].text) || ''
        }));

        // UI refs
        const cardEl = document.getElementById('card');
        const frontEl = document.getElementById('front');
        const backEl = document.getElementById('back');
        const prevBtn = document.getElementById('prev');
        const nextBtn = document.getElementById('next');
        const flipBtn = document.getElementById('flip');
        const countEl = document.getElementById('count');

        let idx = 0;

        function render() {
            if (!flashcards.length) {
                frontEl.textContent = 'No flashcards available.';
                backEl.textContent = '';
                countEl.textContent = '0 / 0';
                return;
            }
            const cur = flashcards[idx];
            frontEl.textContent = cur.question;
            backEl.textContent = cur.answer;
            countEl.textContent = `${idx + 1} / ${flashcards.length}`;
            // ensure card is front-facing
            cardEl.classList.remove('flipped');
        }

        prevBtn.addEventListener('click', () => {
            if (!flashcards.length) return;
            idx = (idx - 1 + flashcards.length) % flashcards.length;
            render();
        });

        nextBtn.addEventListener('click', () => {
            if (!flashcards.length) return;
            idx = (idx + 1) % flashcards.length;
            render();
        });

        flipBtn.addEventListener('click', () => {
            cardEl.classList.toggle('flipped');
        });

        // allow clicking the card to flip
        cardEl.addEventListener('click', () => cardEl.classList.toggle('flipped'));

        // initial render
        render();
    </script>
    <script src="nav.js"></script>
</body>

</html>